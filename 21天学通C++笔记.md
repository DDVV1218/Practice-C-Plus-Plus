### 前缀后缀递增运算符的重载

```C++
class Date
{
private:
    int day, month, year;
public:
    Date(int day, int month, int year): day(day), month(month), year(year) {};
    Date& operator ++ ();
    Date operator ++();
    friend ostream& operator<<(ostream& os, const Date& date);
}

/*
前缀递增运算符++：先递增，再返回，因此要返回本身的引用
*/
Date& Date::operator++()
{
    ++day;
    return *this;
}

/*
后缀递增运算符：先返回，再递增，因此需要返回一个副本
*/
Date Date::operator++()
{
    Date copy(day, month, year);
    ++day;
    return copy;
}
```

### 转换运算符

- 用转换构造函数可以将一个指定类型的数据转换为类的对象；类型转换函数的作用是将一个类的对象转换为另一类型的数据

```C++
// 如果已经声明了一个Complex类，那么可以定义如下转换，double即为返回值的类型
operator double()
{
    return real;
}

// 当Complex类具有转换运算函数，则可以作为右值直接赋值给double类型对象
Complex dd;
double vv = dd + 0.1;	// 这其实属于隐式转换
```

- 其实本质上转换运算符是将类对象转化为对应的常见数据类型，上例表现的是一个隐式类型转换，如果需要禁止隐式转换，需要加上关键词`explicit`。

```c++
explicit operator double() {...};
```

### 重载输出运算符

```C++
/*
输出运算符：返回一个输出流的引用，这个输出流的引用作为参数传入，然后将需要输出的内容传入该输出流，并返回
*/
ostream& operator<< (ostream &os, const Date& date)
{
    os << date.year << "-" << date.month << "-" << date.day << endl;
    return os;
}
```

### 用户定义的字面量

- 自定义字面量通过定义一个特殊的字面量运算符来实现，这个运算符以`operator""`为前缀，后跟一个唯一的标识符

```C++
ReturnType operator "" YourLiteral(ValueType value)
{
    // conversion code here
}
```

- 其中`ValueType`只能是下面几个之一：

```C++
/*
unsigned long long int: 用于定义整型字面量
long double: 用于定义浮点型字面量
char、wchar_t、char16_t和char32_t：用于定义字符字面量
const char*：用于定义原始字符串字面量
*/
```

```C++
#include <iostream>
#include <string>
using namespace std;

struct Temperature
{
    double Kelvin;
    Temperature(long double kelvin): Kelvin(kelvin){};
};

// 这个运算符不只是属于Temperature结构体，而是属于全局
Temperature operator "" _C(long double celsius)
{
	return Temperature(celsius + 273)
}

string operator "" _date()(const char* str, size_t len)
{
    return string(str, 4) + "-" + string(str + 4, 2) + "-" + string(str + 6, 2);
}

int main()
{
    Temperature k1 = 0.0_C;			// k1 = 273 Kelvin
    auto date = "20230101"_date;	// date = "2023-01-01"
}
```













